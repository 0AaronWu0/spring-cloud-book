# 1.4 微服务架构的优点与挑战

微服务架构相对单体架构有着显著的优点；同时，使用微服务也为我们的工作带来了一定的挑战。我们先来分析一下使用微服务有哪些优点。



## 微服务架构的优点

* 易于开发和维护

因为单个微服务只关注一个特定的业务功能，所以业务清晰、代码量较少。开发和维护单个微服务相对来说是比较简单的，单个微服务会一直处于一个可维护的状态；而整个应用是由若干个微服务构建而成的，所以整个应用也会处于可控状态。

* 单个微服务启动较快

单个微服务代码量较少，所以启动会比较快。

* 局部修改容易部署

单体应用只要有修改，就得重新部署整个应用，微服务则解决了这样的问题。一般来说，对某个微服务进行修改，只需要重新部署这个该服务即可。

* 技术栈不受限

在微服务中，我们可以结合项目业务及团队的特点，合理地选择技术栈。例如某些服务可使用关系型数据库MySQL；某些微服务有图形计算的需求，我们可以选择Neo4J；甚至可以根据需要，部分微服务使用Java开发，部分微服务使用NodeJS进行开发。

* 按需伸缩

我们可以根据单个微服务的需要，实现细粒度的扩展。例如：应用系统中的某个微服务遇到了瓶颈，我们可以结合这个微服务的业务特点，增加内存、升级CPU或者是增加节点。

通过以上的分析，我们可以发现，单体架构的缺点，恰恰是微服务的优点，这些优点使得微服务看起来简直完美。然而完美的东西是不存在的，就像银弹也不存在一样。下面我们来讨论使用微服务为我们带来的挑战。



## 微服务架构的挑战

* 运维要求较高

更多的服务意味着更多的运维投入。在单体架构中，只需要保证一个应用的正常运行；而在微服务中，需要保证几十甚至几百个服务的正常运行与协作，这给项目的运维带来了很大的挑战。

* 分布式固有的复杂性

使用微服务构建的是分布式系统。对于一个分布式系统，系统容错、网络延迟、分布式事务、异步请求等问题都给我们带来了很大的挑战。

* 接口调整成本高

微服务之间通过接口进行通信。如果修改某一个微服务的API，可能所有使用了该接口的微服务都需要做调整。

* 重复劳动

在很多服务中可能都会使用到同一个功能，而这一功能点并没有大到抽离一个微服务的程度，这个时候可能不同的服务团队都会开发这一功能，从而导致代码重复。尽管我们可以使用共享库来解决这样的问题，例如可以将公共部分封装成公共组件，然后需要该功能的微服务引用该组件。但共享库的方式在多语言环境下就不一定行得通了。

总而言之，尽管微服务有很多吸引人的地方，但微服务不是免费的午餐，使用微服务是有成本的——它对开发、测试、运维都带来了一些挑战。下面我们来探讨一下微服务架构的设计原则有哪些，应该怎么样去合理地架构微服务。