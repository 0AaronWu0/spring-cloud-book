# 4.5 实现一个Eureka Server

Eureka的原理比较抽象，包含的组件也比较多。下面我们通过代码，详细讲解如何使用Eureka完成服务发现。我们先来实现一个Eurek Server。

在Spring Cloud中，实现一个Eureka Server是非常简单的一件事。

* 我们首先将Maven依赖添加到项目中：

```xml
<dependency>
  <groupId>org.springframework.cloud</groupId>
  <artifactId>spring-cloud-starter-eureka-server</artifactId>
</dependency>
```
* 然后编写一个启动类，在其上添加`@EnableEurekaServer` 注解；
* 最后在配置文件application.yml中添加如下配置：

```yaml
server:
  port: 8761                    # 指定该Eureka实例的端口
eureka:
  client:
    registerWithEureka: false
    fetchRegistry: false
    serviceUrl:
      defaultZone: http://localhost:8761/eureka/
```

这样就完成了一个简单的Eureka Server。我们简要说明一下application.yml中的配置项：

`eureka.client.registerWithEureka` ：表示是否将自己注册到Eureka Server，默认为true。由于当前这个应用就是Eureka Server，故而设为false。
`eureka.client.fetchRegistry` ：表示是否从Eureka Server获取注册信息，默认为true。因为这是一个单点的Eureka Server，不需要同步其他的Eureka Server节点的数据，故而设为false。
`eureka.client.serviceUrl.defaultZone` ：设置与Eureka Server交互的地址，默认是`http://localhost:8761/eureka`  ；多个使用 , 分隔。查询服务和注册服务都需要依赖这个地址。

Eureka的配置类所在类：

```java
org.springframework.cloud.netflix.eureka.EurekaInstanceConfigBean
org.springframework.cloud.netflix.eureka.EurekaClientConfigBean
org.springframework.cloud.netflix.eureka.server.EurekaServerConfigBean
```
