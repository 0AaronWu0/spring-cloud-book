

## docker-compose.yml常用命令



 **image**

指定镜像名称或者镜像id，如果该镜像在本地不存在，Compose会尝试pull下来。

示例：

```
image: java
```



**build**

指定Dockerfile文件的路径。可以是一个路径，例如：

```
build: ./dir
```

也可以是一个对象，用以指定Dockerfile和参数，例如：

```
build:
  context: ./dir
  dockerfile: Dockerfile-alternate
  args:
    buildno: 1
```



**command**

覆盖容器启动后默认执行的命令。

示例：

```
command: bundle exec thin -p 3000
```

也可以是一个list，类似于Dockerfile总的CMD指令，格式如下：

```
command: [bundle, exec, thin, -p, 3000]
```



**links**

链接到其他服务中的容器。可以指定服务名称和链接的别名使用`SERVICE:ALIAS` 的形式，或者只指定服务名称，示例：

```
web:
  links:
   - db
   - db:database
   - redis
```



**external_links**

表示链接到docker-compose.yml外部的容器，甚至并非Compose管理的容器，特别是对于那些提供共享容器或共同服务。格式跟links类似，示例：

```
external_links:
 - redis_1
 - project_db_1:mysql
 - project_db_1:postgresql
```



**ports**

暴露端口信息。使用宿主端口:容器端口的格式，或者仅仅指定容器的端口（此时宿主机将会随机指定端口），类似于`docker run -p ` ，示例：

```
ports:
 - "3000"
 - "3000-3005"
 - "8000:8000"
 - "9090-9091:8080-8081"
 - "49100:22"
 - "127.0.0.1:8001:8001"
 - "127.0.0.1:5000-5010:5000-5010"
```



**expose**

暴露端口，只将端口暴露给连接的服务，而不暴露给宿主机，示例：

```
expose:
 - "3000"
 - "8000"
```



// TODO 待补充。







docker-compose.yml文件官方文档：https://docs.docker.com/compose/compose-file/

http://www.tuicool.com/articles/AnIVJn

http://blog.csdn.net/zhiaini06/article/details/45287663