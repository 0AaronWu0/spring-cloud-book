# 3.2.4 硬编码存在什么问题？

至此，我们已经实现了一个用户微服务和电影微服务，并在电影微服务中使用RestTemplate调用用户微服务中的RESTful API。一切都是那么的自然、简单，perfect！

那么真的完美吗？我们来分析一下上文的代码：在服务消费者MovieController.java中：

```java
  @GetMapping("/simple/{id}")
  public User findById(@PathVariable Long id) {
    return this.restTemplate.getForObject(this.userServiceUrl + "1", User.class);
  }
```

我们可以看到：电影微服务读取配置文件`application.yml` 中的配置项`userServiceUrl: http://localhost:7900/` ，然后请求`http://localhost:7900/1` 。

也就是说，我们是把配置硬编码在配置文件中的。在传统的开发中，我们也经常这么做。这样存在什么样的问题呢？

* 适用场景有局限

如果服务提供者的网络地址（IP和端口）发生了变化，将会影响服务消费者。在现代的部署环境中，网络地址往往是动态的，我们对用户微服务进行修改并重新发布，它的网络地址很可能会发生变化。此时，我们需要修改电影微服务的配置，并重新发布。这显然是不可取的。

* 无法动态伸缩

在生产环境中，每个微服务往往部署多个实例，以实现容灾和负载均衡。并且在微服务中，我们需要系统具备自动伸缩的能力，硬编码无法适应这种需求。

那么要如何解决这样的问题呢？且听下回分解。

